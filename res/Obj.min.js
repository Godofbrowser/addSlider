function generateGUID(){do var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,s="x"==t?e:3&e|8;return s.toString(16)});while(GUIDList.indexOf(t)>-1);return t}function Obj(){this._parent=null,this._handlers=[],this._onceHandlers=[],this._elements=$(),this.guid=generateGUID(),this.on=function(t,e){"function"==typeof t&&void 0===e&&(e=t,t="all"),t=t.toLowerCase().split(" ");for(var s=0;s<t.length;s++)this._handlers.push({event:t[s],handler:e});return this},this.once=function(t,e){"function"==typeof t&&void 0===e&&(e=t,t="all"),t=t.toLowerCase().split(" ");for(var s=0;s<t.length;s++)this._onceHandlers.push({event:t[s],handler:e});return this},this.off=function(t,e){if(void 0===e&&"function"==typeof t)for(var e=t,s=0;s<this._handlers.length;s++)this._handlers[s].handler==e&&this._handlers.splice(s--,1);else if(void 0===e&&"string"==typeof t){t=t.toLowerCase().split(" ");for(var s=0;s<this._handlers.length;s++)t.indexOf(this._handlers[s].event)>-1&&this._handlers.splice(s--,1)}else{t=t.toLowerCase().split(" ");for(var s=0;s<this._handlers.length;s++)t.indexOf(this._handlers[s].event)>-1&&this._handlers[s].handler==e&&this._handlers.splice(s--,1)}return this},this.offOnce=function(t,e){if(void 0===e&&"function"==typeof t)for(var e=t,s=0;s<this._onceHandlers.length;s++)this._onceHandlers[s].handler==e&&this._onceHandlers.splice(s--,1);else if(void 0===e&&"string"==typeof t){t=t.toLowerCase().split(" ");for(var s=0;s<this._onceHandlers.length;s++)t.indexOf(this._onceHandlers[s].event)>-1&&this._onceHandlers.splice(s--,1)}else{t=t.toLowerCase().split(" ");for(var s=0;s<this._onceHandlers.length;s++)t.indexOf(this._onceHandlers[s].event)>-1&&this._onceHandlers[s].handler==e&&this._onceHandlers.splice(s--,1)}return this},this.trigger=function(t,e){t=t.toLowerCase().split(" ");for(var s=0;s<this._handlers.length;s++)(t.indexOf(this._handlers[s].event)>-1||"all"==this._handlers[s].event)&&this._handlers[s].handler.call(this,this._handlers[s].event,e);for(var s=0;s<this._onceHandlers.length;s++)(t.indexOf(this._onceHandlers[s].event)>-1||"all"==this._handlers[s].event)&&(this._onceHandlers[s].handler.call(this,this._onceHandlers[s].event,e),this._onceHandlers.splice(s--,1));return this},this.subscribe=function(t){return void 0!=t.listener&&"function"==typeof t.listener&&this.on("all",t.listener),this},this.ubsubscribe=function(t){return void 0!=t.listener&&"function"==typeof t.listener&&this.off("all",t.listener),this},this.publish=function(t,e){return this.trigger(t,e)},this.renderer=function(){return $("<div class='Obj'></div>")},this.refresher=function(t){return this.renderer.apply(this)},this.destroyer=function(t){},this.render=function(t,e){var s=this;if(void 0===t)var t="body";if(void 0===e)var e="replace";else e=e.toLowerCase();var i=[].slice.call(arguments,2),n=this;return $(t).each(function(t,a){a=$(a);var d=$(s.renderer.apply(s,i));d.attr("guid",s.guid),s._elements=s._elements.add(d),"append"==e?a.append(d):"prepend"==e?a.prepend(d):"after"==e?a.after(d):"before"==e?a.before(d):"return"==e?n=d:"none"==e||(a.after(d),a.remove())}),this.trigger("render"),n},this.refresh=function(){for(var t=$(),e=0;e<this._elements.length;e++){var s=this._elements.eq(e),i=this.refresher.call(this,s);i?(this._elements=this._elements.not(s),s.after(i),s.remove(),t=t.add(i)):t=t.add(s)}return this._elements=t,this},this.destroy=function(){var t=this;return this._elements.each(function(e,s){var i=$(s);t.destroyer.call(t,i)}),this._elements.remove(),this._elements=$(),delete Objs[this.guid],this},Objs[this.guid]=this}var GUIDList=[],Objs={};